document.addEventListener("DOMContentLoaded",function(){async function t(){const t=async()=>{const t=await fetch("./contents/fetch-page-jsons/tc-form.json"),e=await t.json();return e},e=(t,e)=>{const n=e.find(e=>e.admissionNo===t);return!!n},n=()=>{const t=(new Date).toLocaleString();document.getElementById("form-date-time").value=t},o=()=>{document.getElementById("tc-form-btn").classList.add("hidden"),document.getElementById("tc-form-please").classList.remove("hidden")},c=()=>{m(),document.getElementById("tc-form-success").classList.remove("hidden"),setTimeout(()=>{document.forms["tc-application-form"].reset(),m(),document.getElementById("tc-form-btn").classList.remove("hidden")},1e4)},s=t=>{m(),document.getElementById(t).classList.remove("hidden"),setTimeout(()=>{document.forms["tc-application-form"].reset(),m(),document.getElementById("tc-form-btn").classList.remove("hidden")},5e3)},m=()=>{const t=["tc-form-please","tc-form-success","tc-form-invalid-input-error","tc-form-submit-error"];t.forEach(t=>{document.getElementById(t).classList.add("hidden")})},r=async t=>{n(),o();const e="https://script.google.com/macros/s/AKfycbweG-z1JZ6f8NgiKmXCNQ2Tk5IDg3PMrs3GoLrc2LHHG9DIO6qy5Bk8wCGMnp5Yt3yt6g/exec",m=new FormData(t);try{const t=await fetch(e,{method:"POST",body:m});t.ok?c():s("tc-form-submit-error")}catch(t){s("tc-form-submit-error")}},d=document.forms["tc-application-form"];d.addEventListener("submit",async function(n){n.preventDefault(),o();const c=document.getElementById("admission-number").value,m=await t(),i=e(c,m);i?await r(d):s("tc-form-invalid-input-error")})}document.getElementById("tc-form-btn").addEventListener("click",t)});